# Улучшенная версия бота для бронирования бильярдных столов

В этой директории находится рефакторинг и оптимизация исходного кода из папки Initial_code. Все новые и изменённые файлы располагаются в корне Reservation_bot. Исходные данные, такие как .env, db и изображения, при необходимости копируются либо используются напрямую.

## Основные улучшения
- Асинхронная работа с базой данных (SQLAlchemy 2.0 async)
- Кэширование настроек клуба и макета столов
- Декомпозиция логики по модулям (handlers, db, utils, config)
- Улучшенное логирование и обработка ошибок
- Повышена читаемость и поддерживаемость кода

## Запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Проверьте, что файл `.env` находится в корне Reservation_bot и содержит необходимые переменные:
```
BOT_TOKEN=your_telegram_bot_token_here
ADMIN_IDS=your_telegram_admin_id_here
```

3. Запустите бота:
```bash
python bot.py
```

## Структура
- `bot.py` — основной точка входа, запуск бота и регистрация хендлеров
- `handlers/` — обработчики команд и событий Telegram
- `db/` — асинхронные модели и функции работы с БД
- `utils.py` — утилиты, генерация изображений, кэширование
- `config.py` — загрузка и кэширование конфигов

## Совместимость
- Python 3.10+
- Совместим с SQLite, возможно расширение на PostgreSQL

## Миграция данных
- Для миграции используйте существующую базу данных или скрипты из папки Initial_code.
